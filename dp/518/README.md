# Leetcode 518. Coin Changes II
## æ¨¡å¼è¾¨è­˜

![alt text](imgs/image.png)

åœ¨ Change Coin II æˆ‘å€‘å¯ä»¥å¿«é€Ÿçš„å°‡å•é¡Œæ­¸é¡åˆ° DP å•é¡Œæˆ– Backtracking å•é¡Œï¼Œäº‹å¯¦ä¸Šï¼ŒChange Coin II é€™é¡Œçš„æœ€ä½³è§£é›¢ä¸é–‹DP, ä½†å°æ–¼æ¨¡å¼è¾¨è­˜çš„éç¨‹æœƒæ˜¯åœ¨é¢è©¦çš„é‡è¦é—œå¡ï¼Œå› æ­¤åœ¨æœ¬ç­†è¨˜ä¸­ï¼Œæˆ‘å€‘æœƒä»‹ç´¹å¹¾ç¨®è§£é¡Œæ€è·¯ï¼Œå¹«åŠ©è®€è€…èƒ½å¤ æ·±å…¥æ·ºå‡ºçš„ç†è§£é€™é¡é¡Œå‹ã€‚

> é¢è©¦å®˜ä¸æƒ³çœ‹åˆ°ä¸€å€‹åªæœƒå¥—æ¨¡æ¿çš„æ©Ÿå™¨äººï¼Œä»–æƒ³çœ‹åˆ°çš„æ˜¯ä¸€å€‹ç†è§£å•é¡Œæœ¬è³ªã€èƒ½å¤ æ¸…æ™°é—¡è¿°æ€è€ƒéç¨‹çš„å·¥ç¨‹å¸«ã€‚ ã€Œæ¨¡å¼è­˜åˆ¥ (Pattern Recognition)ã€ æ˜¯ç¶“é©—å’Œèƒ½åŠ›çš„é«”ç¾ã€‚ ã€Œæ­»è¨˜ç¡¬èƒŒ (Rote Memorization)ã€ å‰‡æ˜¯ç¼ºä¹ç†è§£çš„è¡¨ç¾ã€‚ ä½ éœ€è¦åšçš„ï¼Œå°±æ˜¯å‘é¢è©¦å®˜å±•ç¤ºå‰è€…ã€‚ éŒ¯èª¤çš„ç¤ºç¯„ ğŸ‘: é¢è©¦å®˜: "è«‹è§£é€™é“é¡Œã€‚" ä½ : "å–”ï¼Œé€™é¡Œæ˜¯å®Œå…¨èƒŒåŒ…å•é¡Œï¼Œå¾ˆç°¡å–®ã€‚" (ç„¶å¾Œé–‹å§‹é»˜å¯«ç¨‹å¼ç¢¼) é€™ç¨®æ–¹å¼é¢¨éšªæ¥µé«˜ã€‚å¦‚æœé¢è©¦å®˜ç¨å¾®æ”¹å‹•ä¸€ä¸‹é¡Œç›®æ¢ä»¶ï¼Œä½ å¯èƒ½å°±ç„¡æ³•æ‡‰å°äº†ã€‚ æ­£ç¢ºçš„ç¤ºç¯„ ğŸ‘: ä½ æ‡‰è©²æŠŠã€Œæ„è­˜åˆ°é€™æ˜¯å®Œå…¨èƒŒåŒ…å•é¡Œã€ç•¶ä½œä½ æ€è€ƒéç¨‹ä¸­çš„ä¸€å€‹é–ƒå…‰é»æˆ–åŠ é€Ÿå™¨ï¼Œè€Œä¸æ˜¯æ€è€ƒçš„èµ·é»ã€‚ä½ ä¾ç„¶è¦å¾ç¬¬ä¸€æ€§åŸç†å‡ºç™¼ï¼Œå‘é¢è©¦å®˜å±•ç¤ºä½ çš„æ¨å°éç¨‹ã€‚


## åˆ†ææ­¥é©Ÿ
### Step1. å¾æœ€ç›´è¦ºçš„ Backtracking æ–¹æ³•é–‹å§‹, å…ˆåˆ†æé¡Œå‹çš„è§£æ³•ï¼š
![alt text](imgs/image-1.png)

åœ¨é€™å€‹ç›´è¦ºçš„æ¼”ç®—æ³•ä¸­ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ï¼šåœ¨æ¯ä¸€æ­¥ï¼Œå¾æ‰€æœ‰ç¡¬å¹£ä¸­é¸æ“‡ä¸€å€‹ï¼Œä¸€ç›´åŠ åˆ°æœ€çµ‚é”åˆ°ç›®æ¨™æ•¸ç›®ç‚ºæ­¢ã€‚çµ„æˆ amount == 3 çš„çµ„åˆæœ‰ä¸‰é …ï¼Œ[1, 1, 1], [1, 2], [2, 1]. ç„¶è€Œæ ¹æ“šé¡Œç›®ï¼Œ[1, 2] èˆ‡ [2, 1] æœƒæ˜¯é‡è¤‡çš„ï¼Œæ‡‰è©²åªæ˜¯ç‚ºä¸€é …ï¼Œå› æ­¤ï¼ŒçœŸæ­£çš„ç­”æ¡ˆæœƒæ˜¯ `2`. é€™ä»£è¡¨å¦‚æœæˆ‘å€‘ä½¿ç”¨æ­¤ backtracking æ–¹æ³•ï¼Œæœƒéœ€è¦è™•ç†å¤§é‡ç›¸åŒçµ„åˆä½†é †åºä¸åŒçš„å•é¡Œã€‚æ‰€ä»¥æ™‚é–“è¤‡é›œåº¦æ˜¯æŒ‡æ•¸ç´šçš„ï¼Œéœ€è¦å„ªåŒ–ã€‚


### Step 2. æ ¹æ“š Step 1 æ‰€åˆ†æå‡ºçš„ç¼ºé»ï¼Œå¼•å…¥æ¨¡å¼è­˜åˆ¥ï¼š

#### Option A. ä¿®æ”¹ Backtracking æ¼”ç®—æ³•
![alt text](imgs/image-2.png)


- åœ¨ä¸Šåœ–ä¸­ï¼Œæˆ‘å€‘å°æ–¼backtracking çš„ç®—æ³•é€²è¡Œèª¿æ•´ï¼Œä¿®æ”¹äº† DFS çš„ç‹€æ…‹å®šç¾©ï¼Œå¾åªé—œå¿ƒ current_sum è®Šç‚ºé—œå¿ƒ (current_amount, current_index)ã€‚
- åœ¨æ¯å€‹ç‹€æ…‹ï¼Œæˆ‘å€‘åªé‡å° coins[current_index] é€™æšç¡¬å¹£åšæ±ºç­–ï¼šã€ä½¿ç”¨å®ƒï¼ˆindex ä¸è®Šï¼‰ã€æˆ–æ˜¯ã€æ°¸é è·³éå®ƒï¼ˆindex + 1ï¼‰ã€ã€‚ 
    - é€éå°‡å•é¡Œæ‹†åˆ†æˆå­å•é¡Œï¼Œæˆ‘å€‘å¯ä»¥æ’é™¤æ‰åŒçµ„åˆé †åºä¸åŒçš„å•é¡Œï¼š 
        - å­å•é¡Œ 1. ä¸æ”¹å‹• coins çš„ index 
        - å­å•é¡Œ 2. æ›åˆ°ä¸‹ä¸€å€‹ index 

#### Option B. ç‚ºäº†æ‰¾å‡ºå„ªåŒ–çš„ç®—æ³•ï¼Œæˆ‘å€‘æœƒé‡æ–°å¯©è¦–æ­¤å•é¡Œçš„çµæ§‹ï¼š
- ä¸€å€‹ç›®æ¨™ç¸½é‡ (amount)
- ä¸€äº›ç‰©å“ (coins) å¯ä»¥ç„¡é™æ¬¡é¸å–
- æ±‚è§£ä¸€å€‹è¨ˆæ•¸å•é¡Œ
é€™å¯ä»¥è®“æˆ‘å€‘æƒ³åˆ°ã€å®Œå…¨èƒŒåŒ…ã€é€™å€‹ç¶“å…¸çš„**å‹•æ…‹è¦åŠƒæ¨¡å‹**ã€‚é€™å€‹æ¨¡å‹çš„ç‹€æ…‹å®šç¾©å’Œè½‰ç§»æ–¹ç¨‹å¯ä»¥å¾ˆå¥½åœ°å¥—ç”¨åœ¨é€™è£¡ï¼Œä¾†è§£æ±ºå‰›æ‰æåˆ°çš„é‡è¤‡è¨ˆç®—å•é¡Œã€‚


        


### Step 3. å¯¦ç¾æœ€çµ‚çš„ DP è§£æ³•
ç¶“é Step 2 çš„åˆ†æï¼Œæˆ‘å€‘æœ‰å…©æ¢æ¸…æ™°çš„è·¯å¾‘é€šå¾€æœ€çµ‚çš„ DP è§£æ³•ã€‚ä¸€æ¢æ˜¯å„ªåŒ–æˆ‘å€‘æ”¹è‰¯ç‰ˆçš„ Backtrackingï¼Œå¦ä¸€æ¢æ˜¯ç›´æ¥å¯¦ç¾ã€Œå®Œå…¨èƒŒåŒ…ã€æ¨¡å‹ã€‚é€™æ­£å¥½å°æ‡‰äº†å‹•æ…‹è¦åŠƒçš„å…©ç¨®ç¶“å…¸å¯¦ç¾æ–¹å¼ï¼šç”±ä¸Šè€Œä¸‹ (Top-Down) å’Œ ç”±ä¸‹è€Œä¸Š (Bottom-Up)ã€‚

#### 3.A. ç”±ä¸Šè€Œä¸‹ (Top-Down): å„ªåŒ– Backtracking
é€™å€‹æ–¹æ³•æ˜¯ Step 2 - Option A æ€è·¯çš„ç›´æ¥ä»£ç¢¼åŒ–ã€‚æˆ‘å€‘ä¿ç•™å…¶éè¿´çµæ§‹ï¼Œä¸¦åŠ å…¥ä¸€å€‹ã€Œå‚™å¿˜éŒ„ (memo)ã€ä¾†å„²å­˜è¨ˆç®—éçš„å­å•é¡Œçµæœï¼Œé¿å…é‡è¤‡è¨ˆç®—ã€‚é€™å°±æ˜¯æ‰€è¬‚çš„è¨˜æ†¶åŒ–æœç´¢ (Memoization)ã€‚

- æ ¸å¿ƒæ€æƒ³ï¼š
    - éè¿´çµæ§‹ï¼šæ²¿ç”¨ count_ways(amount, index) çš„çµæ§‹ã€‚
    - å‚™å¿˜éŒ„ memoï¼šä¸€å€‹äºŒç¶­é™£åˆ— memo[amount][index]ï¼Œç”¨ä¾†å„²å­˜å­å•é¡Œçš„è§£ã€‚åˆå§‹å€¼è¨­ç‚ºä¸€å€‹ç‰¹æ®Šæ¨™è¨˜ï¼ˆå¦‚ -1ï¼‰ï¼Œè¡¨ç¤ºå°šæœªè¨ˆç®—ã€‚
- åŸ·è¡Œæµç¨‹ï¼š
    - é€²å…¥éè¿´å‡½å¼ï¼Œå…ˆæª¢æŸ¥ memo ä¸­æ˜¯å¦å·²æœ‰ç­”æ¡ˆï¼Œè‹¥æœ‰å‰‡ç›´æ¥è¿”å›ã€‚
    - è‹¥æ²’æœ‰ï¼Œå‰‡æ­£å¸¸é€²è¡Œéè¿´è¨ˆç®—ã€‚
    - åœ¨è¿”å›è¨ˆç®—çµæœä¹‹å‰ï¼Œå°‡å…¶å­˜å…¥ memoã€‚
- Python ç¯„ä¾‹ï¼š
    ```python
    def change_top_down(amount: int, coins: list[int]) -> int:
        """
        è§£æ³•ä¸€ï¼šç”±ä¸Šè€Œä¸‹ (Top-Down) çš„å‹•æ…‹è¦åŠƒ
        å³ã€Œéè¿´ + è¨˜æ†¶åŒ–ã€ï¼Œç›´æ¥å„ªåŒ– Step 2 çš„ Backtracking æ€è·¯
        """
        # åˆå§‹åŒ–å‚™å¿˜éŒ„ï¼Œ-1 ä»£è¡¨å°šæœªè¨ˆç®—
        memo = {}

        def count_ways_memo(current_amount, index):
            # å»ºç«‹ä¸€å€‹å”¯ä¸€çš„éµä¾†ä»£è¡¨å­å•é¡Œç‹€æ…‹
            state = (current_amount, index)

            # 1. æª¢æŸ¥å‚™å¿˜éŒ„
            if state in memo:
                return memo[state]

            # Base Cases (éè¿´çµ‚æ­¢æ¢ä»¶)
            if current_amount == 0:
                return 1
            if current_amount < 0 or index >= len(coins):
                return 0

            # éè¿´é—œä¿‚å¼ (èˆ‡ Step 2 å®Œå…¨ç›¸åŒ)
            # é¸æ“‡ 1: ä½¿ç”¨ coins[index]
            include_this_coin = count_ways_memo(current_amount - coins[index], index)

            # é¸æ“‡ 2: ä¸ä½¿ç”¨ coins[index]
            exclude_this_coin = count_ways_memo(current_amount, index + 1)

            result = include_this_coin + exclude_this_coin

            # 3. å­˜å…¥å‚™å¿˜éŒ„
            memo[state] = result
            return result

        return count_ways_memo(amount, 0)

    # æ™‚é–“è¤‡é›œåº¦: O(N * amount), Nç‚ºç¡¬å¹£ç¨®é¡æ•¸ã€‚å› ç‚ºæ¯å€‹ç‹€æ…‹ (amount, index) åªæœƒè¨ˆç®—ä¸€æ¬¡ã€‚
    # ç©ºé–“è¤‡é›œåº¦: O(N * amount), ç”¨æ–¼å„²å­˜å‚™å¿˜éŒ„å’Œéè¿´å †ç–Šã€‚
    ```

#### 3.B. ç”±ä¸‹è€Œä¸Š (Bottom-Up): å¯¦ç¾ã€Œå®Œå…¨èƒŒåŒ…ã€æ¨¡å‹
é€™å€‹æ–¹æ³•æ˜¯ Step 2 - Option B æ€è·¯çš„ç›´æ¥å¯¦ç¾ã€‚æˆ‘å€‘æ‹‹æ£„éè¿´ï¼Œæ”¹ç”¨è¿´åœˆçš„æ–¹å¼ï¼Œå¾æœ€å°çš„å­å•é¡Œï¼ˆæ¹Šå‡º 0 å…ƒï¼‰é–‹å§‹ï¼Œé€æ­¥å»ºç«‹å‡ºæœ€çµ‚ç­”æ¡ˆï¼ˆæ¹Šå‡º amount å…ƒï¼‰ã€‚å³åˆ—è¡¨æ³• (Tabulation)ã€‚

- æ ¸å¿ƒæ€æƒ³ï¼š DP è¡¨ 
    - `dp`ï¼šå»ºç«‹ä¸€å€‹ä¸€ç¶­é™£åˆ— dpï¼Œ`dp[i]` ä»£è¡¨ã€Œæ¹Šå‡ºé‡‘é¡ `i` çš„çµ„åˆç¸½æ•¸ã€ã€‚
    - åŸºç¤ç‹€æ…‹ (Base Case)ï¼š`dp[0] = 1`ã€‚æ¹Šå‡º 0 å…ƒçš„æ–¹æ³•åªæœ‰ä¸€ç¨®ï¼Œå°±æ˜¯ä¸é¸ä»»ä½•ç¡¬å¹£ã€‚
    - ç‹€æ…‹è½‰ç§»ï¼šæˆ‘å€‘éæ­·æ¯ä¸€ç¨®ç¡¬å¹£ï¼Œç”¨é€™æšç¡¬å¹£å»æ›´æ–° `dp` è¡¨ã€‚å°æ–¼ä¸€æšç¡¬å¹£ coinï¼Œå®ƒå¯ä»¥ç‚ºæ‰€æœ‰ `j >= coin` çš„é‡‘é¡ j è²¢ç»æ–°çš„çµ„åˆæ–¹æ³•ã€‚æ–°çš„æ–¹æ³•æ•¸ä¾†è‡ªæ–¼ `dp[j - coin]`ã€‚
- Python ç¯„ä¾‹ï¼š
    ```python
    def change_bottom_up(amount: int, coins: list[int]) -> int:
        """
        è§£æ³•äºŒï¼šç”±ä¸‹è€Œä¸Š (Bottom-Up) çš„å‹•æ…‹è¦åŠƒ
        å¯¦ç¾ã€Œå®Œå…¨èƒŒåŒ…ã€è¨ˆæ•¸å•é¡Œçš„å…·é«”è§£æ³•
        """
        # dp[i] ä»£è¡¨æ¹Šå‡ºé‡‘é¡ i çš„æ–¹æ³•æ•¸
        dp = [0] * (amount + 1)
        dp[0] = 1

        for coin in coins:
            for j in range(coin, amount + 1):
                dp[j] += dp[j - coin]

        return dp[amount]

    ```
    
    
## ç¸½çµæ¯”è¼ƒ
| ç‰¹æ€§ | Top-Down (è¨˜æ†¶åŒ–) | Bottom-Up (åˆ—è¡¨æ³•) | 
|-|-|-|
| å¯¦ç¾æ–¹å¼ | éè¿´ + å‚™å¿˜éŒ„ | è¿´åœˆ + DP è¡¨ |
| æ€ç¶­è·¯å¾‘ | å¾å¤§å•é¡Œåˆ†è§£åˆ°å°å•é¡Œ | å¾å°å•é¡Œå»ºç«‹åˆ°å¤§å•é¡Œ |
| èˆ‡ç­†è¨˜é—œè¯ | ç›´æ¥å„ªåŒ– Step 2 çš„ Backtracking | å¯¦ç¾ Step 2 çš„ã€Œå®Œå…¨èƒŒåŒ…ã€æ¨¡å‹ |
| å„ªé» | æ€è·¯ç›´è§€ï¼Œèˆ‡éè¿´æ€è€ƒä¸€è‡´ | é€šå¸¸æ•ˆç‡æ›´é«˜ï¼ˆç„¡éè¿´é–‹éŠ·ï¼‰ï¼Œç©ºé–“æ˜“æ–¼å„ªåŒ– |
| å ´æ™¯ | é©åˆå­å•é¡Œç©ºé–“ç¨€ç–çš„å ´æ™¯ | é©åˆå­å•é¡Œç©ºé–“ç¨ å¯†çš„å ´æ™¯ |